// internal/adapters/inbound/http/web/assets/templates/layoutcomponents/user_menu.templ
package layoutcomponents

templ UserMenu(userName string, role string) {
	<div class="relative flex items-center gap-3">
		<div class="text-right leading-tight">
			<div class="max-w-[16rem] truncate text-sm font-medium text-on-primary">{ userName }</div>
			<div class="text-xs text-on-primary">{ role }</div>
		</div>
		<details class="relative">
			<summary class="list-none flex cursor-pointer items-center rounded-lg p-1.5 hover:bg-surface-variant focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-outline">
				<svg class="h-5 w-5 text-on-primary" aria-hidden="true">
					<use href="#icon-menu"></use>
				</svg>
			</summary>
			<div class="absolute right-0 mt-2 w-56 overflow-hidden rounded-xl border border-outline bg-surface shadow-lg z-50">
				<div class="p-1">
					<button
						type="button"
						class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-on-surface hover:bg-surface-variant"
						onclick="window.sonnda?.toggleTheme?.(); this.closest('details')?.removeAttribute('open');"
					>
						<span class="i">ğŸŒ“</span>
						<span>Alternar tema</span>
					</button>
					<div class="my-1 h-px bg-outline/60"></div>
					<form method="post" action="/auth/logout">
						<button
							type="submit"
							class="flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-on-surface hover:bg-surface-variant"
						>
							<span class="i">ğŸšª</span>
							<span>Sair</span>
						</button>
					</form>
				</div>
			</div>
		</details>
	</div>
}
